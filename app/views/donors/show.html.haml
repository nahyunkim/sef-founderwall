%h1 #{@donor.first_name} #{@donor.last_name}

- @tiers.each do |tier|
  - @donor_nonempty_dedications_by_tier[tier].each do |dedication|
    %div{:class => "dedication", :id => dedication.id} 
      .col-md-4.portfolio-item
        .panel.panel-default
          .panel-heading
            %h4= dedication.tier
          .panel-body
            %p= dedication.dedication
            %p= link_to "#{dedication.hospital.name}", hospital_path(Hospital.find(dedication.hospital_id))
            %p= link_to "View Dedication", dedication_path(dedication), :id => "view_#{dedication.id}"
            - if !dedication.published && @donor_logged_in
                %p= link_to "Edit", edit_dedication_path(dedication.id)

- if @donor_logged_in
    - if !@donor_new_dedications.empty?
        %p You can write dedications for your following donations:
        - @donor_new_dedications.each do |dedication|
            %div{:class => "dedication", :id => dedication.id} 
                = link_to "#{dedication.hospital.name}",
                      hospital_path(Hospital.find(dedication.hospital_id))
                  
                %ul
                    %li Tier: #{dedication.tier}
                = link_to "View Dedication", dedication_path(dedication), :id => "view_#{dedication.id}"
                - if !dedication.published 
                    = link_to "Edit", edit_dedication_path(dedication.id)
    
    = button_to "Log out", destroy_user_session_path, :method => :delete